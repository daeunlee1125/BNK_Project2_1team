<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.api.backend.mapper.ExchangeRateMapper">

    <select id="selectExchangeRate" resultType="kr.co.api.backend.dto.ExchangeRateDTO">
        SELECT *
        FROM (
                 SELECT
                     TO_CHAR(STD_DT, 'YYYYMMDD') AS stdDt,
                     ACCT_CODE                   AS acctCode,
                     ACCT_NAME                   AS acctName,
                     EXCH_RATE                   AS exchRate
                 FROM FLOBANK.EXCHANGE_RATES
                 WHERE ACCT_NAME = #{currency}
                   AND TO_CHAR(STD_DT, 'YYYYMMDD') &lt;= #{searchDate}
                 ORDER BY STD_DT DESC
             )
        WHERE ROWNUM = 1
    </select>

</mapper>